#!/bin/bash
SCHEDULE_MINS=$1
SHUTDOWN_MINS=2
SHUTDOWN="shutdown -r +$SHUTDOWN_MINS 'Server is restarting in $SHUTDOWN_MINS mins. Issue \"shutdown -c\" to stop'"

NUMBER_RE='^[0-9]+$'
if ! [[ $SCHEDULE_MINS =~ $NUMBER_RE ]] ; then
   echo "The scheduled minutes must be an integer zero or greater" >&2; exit 1
fi

echo $SHUTDOWN | at now +${SCHEDULE_MINS} min
echo "You can view scheduled jobs with \"atq\" and delete jobs with \"atrm <#>\""
